<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shortcut's Skin Care Spa — Login</title>
  <link
    href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400;1,600&family=Jost:wght@300;400;500;600&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="login.css">
</head>

<body>

  <!-- LEFT PANEL -->
  <div class="panel-left">
    <div class="panel-bg"></div>
    <div class="blob blob-1"></div>
    <div class="blob blob-2"></div>
    <div class="blob blob-3"></div>
    <div class="grid-lines"></div>
    <canvas id="particleCanvas"
      style="position:absolute;inset:0;width:100%;height:100%;pointer-events:none;z-index:1;"></canvas>

    <div class="panel-content">
      <div class="brand">
        <div class="brand-mark">
          <svg viewBox="0 0 36 36" fill="none">
            <path d="M18 4C18 4 6 10 6 20C6 26.627 11.373 32 18 32C24.627 32 30 26.627 30 20C30 10 18 4 18 4Z"
              fill="rgba(143,196,154,0.25)" stroke="#8fc49a" stroke-width="1.2" />
            <path d="M18 10V28M18 10C18 10 12 14 12 20M18 10C18 10 24 14 24 20" stroke="#8fc49a" stroke-width="1"
              stroke-linecap="round" />
          </svg>
        </div>
        <div>
          <div class="brand-name">Shortcut's<br><em>Skin Care Spa</em></div>
          <div class="brand-sub">Management System</div>
        </div>
      </div>

      <div class="divider-line"></div>

      <div class="tagline">
        <p>"Where beauty meets technology, and every client feels at home."</p>
      </div>

      <div class="feature-pills">
        <div class="feature-pill">
          <div class="pill-icon">
            <svg viewBox="0 0 24 24">
              <rect x="3" y="4" width="18" height="18" rx="2" />
              <line x1="16" y1="2" x2="16" y2="6" />
              <line x1="8" y1="2" x2="8" y2="6" />
              <line x1="3" y1="10" x2="21" y2="10" />
            </svg>
          </div>
          <div class="pill-text">
            <h5>Smart Scheduling</h5>
            <p>Automated appointment management</p>
          </div>
        </div>
        <div class="feature-pill">
          <div class="pill-icon">
            <svg viewBox="0 0 24 24">
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
              <circle cx="12" cy="12" r="3" />
            </svg>
          </div>
          <div class="pill-text">
            <h5>AR Try-On</h5>
            <p>Visualize treatments before booking</p>
          </div>
        </div>
        <div class="feature-pill">
          <div class="pill-icon">
            <svg viewBox="0 0 24 24">
              <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" />
            </svg>
          </div>
          <div class="pill-text">
            <h5>SMS Reminders</h5>
            <p>Never miss an appointment again</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- RIGHT PANEL -->
  <div class="panel-right">

    <!-- LOGIN BOX -->
    <div class="login-box" id="loginBox">
      <div class="role-tabs">
        <button class="role-tab active" id="tabAdmin" onclick="switchRole('admin')">
          <svg viewBox="0 0 24 24">
            <path
              d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
          </svg>
          Admin
        </button>
        <button class="role-tab" id="tabClient" onclick="switchRole('client')">
          <svg viewBox="0 0 24 24">
            <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2M12 11a4 4 0 100-8 4 4 0 000 8z" />
          </svg>
          Client
        </button>
      </div>

      <div class="login-heading">
        <h2 id="loginTitle">Welcome back</h2>
        <p id="loginSubtitle">Sign in to your admin account</p>
      </div>

      <div class="error-msg" id="errorMsg"></div>

      <div class="form-field">
        <label>Email Address</label>
        <div class="input-wrap">
          <svg viewBox="0 0 24 24">
            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" />
            <polyline points="22,6 12,13 2,6" />
          </svg>
          <input type="email" id="emailInput" placeholder="Enter your email" autocomplete="email">
        </div>
      </div>

      <div class="form-field">
        <label>Password</label>
        <div class="input-wrap">
          <svg viewBox="0 0 24 24">
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2" />
            <path d="M7 11V7a5 5 0 0 1 10 0v4" />
          </svg>
          <input type="password" id="passwordInput" placeholder="Enter your password" autocomplete="current-password"
            onkeydown="if(event.key==='Enter')doLogin()">
          <button class="eye-btn" onclick="togglePw()" type="button">
            <svg id="eyeIcon" viewBox="0 0 24 24">
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
              <circle cx="12" cy="12" r="3" />
            </svg>
          </button>
        </div>
      </div>

      <button class="btn-login" id="loginBtn" onclick="doLogin()">Sign In</button>

      <div class="demo-creds">
        <p>Demo Credentials</p>
        <div class="demo-grid">
          <div class="demo-card" onclick="fillDemo('admin@shortcut.spa','admin123','admin')">
            <h6>Admin</h6>
            <p><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="38595c555156784b50574a4c5b4d4c164b4859">[email&#160;protected]</a></p>
          </div>
          <div class="demo-card" onclick="fillDemo('maria@email.com','maria123','client')">
            <h6>Client</h6>
            <p><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="670a06150e0627020a060e0b4904080a">[email&#160;protected]</a></p>
          </div>
        </div>
      </div>

      <div class="register-link">
        New client? <a onclick="showRegister()">Create an account</a>
      </div>
    </div>

    <!-- REGISTER BOX -->
    <div class="register-box" id="registerBox">
      <div style="margin-bottom:24px">
        <button onclick="showLogin()"
          style="background:none;border:none;cursor:pointer;font-family:'Jost',sans-serif;font-size:13px;color:var(--muted);display:flex;align-items:center;gap:6px;margin-bottom:20px">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="15 18 9 12 15 6" />
          </svg>
          Back to login
        </button>
        <h2 style="font-family:'Playfair Display',serif;font-size:28px;color:var(--text);margin-bottom:6px">Create
          Account</h2>
        <p style="font-size:14px;color:var(--muted)">Join Shortcut's Spa as a new client</p>
      </div>

      <div class="error-msg" id="regErrorMsg"></div>

      <div class="form-field">
        <label>Full Name</label>
        <div class="input-wrap">
          <svg viewBox="0 0 24 24">
            <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2M12 11a4 4 0 100-8 4 4 0 000 8z" />
          </svg>
          <input type="text" id="regName" placeholder="Full name">
        </div>
      </div>
      <div class="form-field">
        <label>Email</label>
        <div class="input-wrap">
          <svg viewBox="0 0 24 24">
            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" />
            <polyline points="22,6 12,13 2,6" />
          </svg>
          <input type="email" id="regEmail" placeholder="your@email.com">
        </div>
      </div>
      <div class="form-field">
        <label>Phone</label>
        <div class="input-wrap">
          <svg viewBox="0 0 24 24">
            <path
              d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07A19.5 19.5 0 013.07 8.81 19.79 19.79 0 01.14 2.18 2 2 0 012.11 0h3a2 2 0 012 1.72c.127.96.361 1.903.7 2.81a2 2 0 01-.45 2.11L6.91 7.09a16 16 0 006 6l.46-.46a2 2 0 012.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0122 16.92z" />
          </svg>
          <input type="text" id="regPhone" placeholder="09XX XXX XXXX">
        </div>
      </div>
      <div class="form-field">
        <label>Password</label>
        <div class="input-wrap">
          <svg viewBox="0 0 24 24">
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2" />
            <path d="M7 11V7a5 5 0 0 1 10 0v4" />
          </svg>
          <input type="password" id="regPassword" placeholder="Create a password">
        </div>
      </div>

      <button class="btn-login" onclick="doRegister()">Create Account</button>
    </div>

  </div>

  <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script src="shared.js"></script>
  <script src="design.js"></script>
  <script>
    let activeRole = 'admin';
    let pwVisible = false;

    function switchRole(role) {
      activeRole = role;
      document.getElementById('tabAdmin').classList.toggle('active', role === 'admin');
      document.getElementById('tabClient').classList.toggle('active', role === 'client');
      document.getElementById('loginTitle').textContent = role === 'admin' ? 'Welcome back' : 'Hello, beautiful!';
      document.getElementById('loginSubtitle').textContent = role === 'admin' ? 'Sign in to your admin account' : 'Sign in to your client account';
      clearError();
      document.getElementById('emailInput').value = '';
      document.getElementById('passwordInput').value = '';
    }

    function fillDemo(email, pw, role) {
      switchRole(role);
      document.getElementById('emailInput').value = email;
      document.getElementById('passwordInput').value = pw;
    }

    function togglePw() {
      pwVisible = !pwVisible;
      document.getElementById('passwordInput').type = pwVisible ? 'text' : 'password';
    }

    function showError(msg) {
      const el = document.getElementById('errorMsg');
      el.textContent = msg; el.classList.add('show');
    }
    function clearError() { document.getElementById('errorMsg').classList.remove('show'); }

    function doLogin() {
      const email = document.getElementById('emailInput').value.trim();
      const pw = document.getElementById('passwordInput').value;
      clearError();
      if (!email || !pw) { showError('Please enter your email and password.'); return; }

      const btn = document.getElementById('loginBtn');
      btn.textContent = 'Signing in…';
      btn.classList.add('loading');

      setTimeout(() => {
        const user = SPA.login(email, pw);
        btn.classList.remove('loading');
        btn.textContent = 'Sign In';

        if (!user) { showError('Incorrect email or password. Please try again.'); return; }
        if (activeRole === 'admin' && user.role === 'client') { showError('This is a client account. Please use the Client tab.'); return; }
        if (activeRole === 'client' && (user.role === 'admin' || user.role === 'employee')) { showError('This is a staff account. Please use the Admin tab.'); return; }

        SPA.persistSession(user);
        if (user.role === 'admin' || user.role === 'employee') window.location.href = 'admin-dashboard.html';
        else window.location.href = 'client-portal.html';
      }, 800);
    }

    function showRegister() {
      document.getElementById('loginBox').classList.add('hidden');
      document.getElementById('registerBox').classList.add('visible');
    }
    function showLogin() {
      document.getElementById('loginBox').classList.remove('hidden');
      document.getElementById('registerBox').classList.remove('visible');
    }

    function doRegister() {
      const name = document.getElementById('regName').value.trim();
      const email = document.getElementById('regEmail').value.trim();
      const phone = document.getElementById('regPhone').value.trim();
      const pw = document.getElementById('regPassword').value;
      const errEl = document.getElementById('regErrorMsg');

      if (!name || !email || !phone || !pw) {
        errEl.textContent = 'All fields are required.'; errEl.classList.add('show'); return;
      }
      const result = SPA.registerAccount({ name, email, password: pw, phone });
      if (result.error) {
        errEl.textContent = result.error; errEl.classList.add('show'); return;
      }
      SPA.addClient({ id: result.id, name, phone, email });
      SPA.persistSession(result);
      window.location.href = 'client-portal.html';
    }

    setTimeout(() => Design.initParticles('particleCanvas'), 100);

    const sess = SPA.getSession();
    if (sess) {
      if (sess.role === 'admin' || sess.role === 'employee') window.location.href = 'admin-dashboard.html';
      else window.location.href = 'client-portal.html';
    }
  </script>
</body>
</html>
